(()=>{"use strict";var t={622:t=>{t.exports=require("path")},549:t=>{t.exports=require("vscode")}},e={};function i(o){var r=e[o];if(void 0!==r)return r.exports;var n=e[o]={exports:{}};return t[o](n,n.exports,i),n.exports}var o={};(()=>{var t=o;Object.defineProperty(t,"__esModule",{value:!0}),t.RiveDocument=t.RiveViewerEditorProvider=t.deactivate=t.activate=void 0;const e=i(622),r=i(549);t.activate=function(t){t.subscriptions.push(s.register(t))};const n="riveviewer.externalDirectories";t.deactivate=function(){};class s{constructor(t){this._context=t,this._onDidChangeCustomDocument=new r.EventEmitter,this.onDidChangeCustomDocument=this._onDidChangeCustomDocument.event}saveCustomDocument(t,e){throw new Error("Method not implemented.")}saveCustomDocumentAs(t,e,i){throw new Error("Method not implemented.")}revertCustomDocument(t,e){throw new Error("Method not implemented.")}backupCustomDocument(t,e,i){throw new Error("Method not implemented.")}openCustomDocument(t,e,i){return new c(t)}resolveCustomEditor(t,i,o){const s=i.webview,c=t.uri.with({scheme:"vscode-resource"}),a=r.workspace.getConfiguration().get(n).map((t=>r.Uri.file(t))),d=[r.Uri.file(this._context.extensionPath)].concat(a),h=r.workspace.workspaceFolders;if(h&&h.length>0)for(const t of h)d.push(t.uri);s.options={enableScripts:!0,localResourceRoots:d},function(t,i){console.log("Validating whether "+i.path+" is allowed.");for(const o of t){const t=(0,e.relative)(o.path,i.path);if(console.log("Resolved relative path from "+o.path+": "+t),!t.startsWith("..")&&!(0,e.isAbsolute)(t))return!0}const o=(0,e.dirname)(i.fsPath);r.window.showErrorMessage(`To view "${i.fsPath}" from the current workspace add "${o}" (or a parent of that directory) to "${n}".`)}(s.options.localResourceRoots,t.uri);const u=r.Uri.joinPath(this._context.extensionUri,"assets","rive.min.js").with({scheme:"vscode-resource"}),v=s.asWebviewUri(r.Uri.joinPath(this._context.extensionUri,"assets","viewer","style.css")),l=r.Uri.joinPath(this._context.extensionUri,"dist","viewer","rive.js").with({scheme:"vscode-resource"}),p=function(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<32;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}(),m=["default-src 'none';",`style-src ${s.cspSource};`,`img-src ${s.cspSource} https:;`,`script-src 'nonce-${p}' 'unsafe-eval' https:;`,`connect-src ${s.cspSource}`].join(" ");s.html=`\n<head>\n  <meta http-equiv="Content-Security-Policy" content="${m}">\n</head>\n<link rel="stylesheet" href="${v}">\n\n<div id="viewer">\n\t<canvas id="canvas" width="400" height="300"></canvas>\n  <div id="contents">\n\t\t<h2 id="currentArtboard"></h2>\n    <div id="artboards">\n\t\t  <label>Artboards</label>\n\t\t</div>\n    \n\t\t<div id=animations class="section">\n\t\t\t<h3>Animations</h3>\n\t\t\t<div id="animationsDetails"></div>\n\t\t</div>\n\t\t\n\t\t<div id=stateMachines class="section">\n\t\t\t<h3>State Machines</h3>\n    \t<div id="stateMachinesDetails"></div>\n\t\t</div>\n  </div>\n</div>\n<script nonce="${p}" src="${u}"><\/script>\n<script nonce="${p}" src="${l}" file="${c}"><\/script>\n\t`}static register(t){return r.window.registerCustomEditorProvider(this.viewType,new s(t),{supportsMultipleEditorsPerDocument:!1})}}t.RiveViewerEditorProvider=s,s.viewType="riveViewer.rivView";class c extends r.Disposable{constructor(t){super((()=>{})),this._uri=t}get uri(){return this._uri}}t.RiveDocument=c})(),module.exports=o})();